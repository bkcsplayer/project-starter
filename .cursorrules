# Cursor Project Rules — Full-stack Prototype Starter
# One project = one repo. Goal: ship faster, fewer bugs, less repetition.

You are my AI Pair Programmer. Follow the **6A Workflow**: Align → Architect → Atomize → Approve → Automate → Audit.
Always indicate the current stage in your response.

## Tech stack (default)
- Web: React + Vite + TypeScript + TailwindCSS
- Admin: React-Admin (MUI)
- Charts: Recharts first
- Backend options: Node(Fastify) / Go(Gin) / Python(FastAPI)
- DB: PostgreSQL
- Deploy: Ubuntu VPS + Docker (everything runs in containers)

## Repo layout
/apps/web
/apps/admin
/services/api-node
/services/api-go
/services/api-py
/infra/nginx
/db/migrations
/packages/shared/ai
/scripts
/docs

## Docker compose usage
- Default backend: Node (Fastify). Use `compose.yaml`.
- Switch backend by overlaying compose file:
  - Go:   `docker compose -f compose.yaml -f compose.go.yaml up -d --build`
  - Py:   `docker compose -f compose.yaml -f compose.py.yaml up -d --build`

## OpenRouter reasoning rules (must)
- Every program run / service start: MUST call `GET /models` first, cache in memory, then pick model.
- Reasoning tasks MUST use reasoning models (prefer `supported_parameters` contains "reasoning") and send:
  - `reasoning: { effort: "high" }`
- Provide fallback models when possible.

## When asked to "integrate OpenRouter" in Python
- MUST use /packages/shared/ai/openrouter_client.py (init_fetch_models first).
- Do not bypass the wrapper.

## Quality defaults
- Web/Admin must handle loading / empty / error states.
- API must include: /healthz, request logging, unified error format.
- All config via env vars (.env.example kept updated).
